<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>交换机lacp协商异常问题</title>
    <link href="/2024/02/13/lacp%E5%8D%8F%E5%95%86%E5%BC%82%E5%B8%B8/"/>
    <url>/2024/02/13/lacp%E5%8D%8F%E5%95%86%E5%BC%82%E5%B8%B8/</url>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><ul><li>进行常规ASW–CSW上联扩容，由80G扩容至160G</li></ul><h3 id="异常现象"><a href="#异常现象" class="headerlink" title="异常现象"></a>异常现象</h3><ul><li>扩容第二个物理端口时，拨测该ASW下，部分IP地址有20个丢包</li><li>扩容第一个端口F1&#x2F;0&#x2F;50时，探测正常，ASW侧开启端口后延迟了30s后加入聚合组，CSW侧同样延迟了30s后加入<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pf">ASW:<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">44</span>:<span class="hljs-number">13</span>:<span class="hljs-number">666</span>  IFNET/<span class="hljs-number">5</span>/LINK UPDOWN: Line protocol <span class="hljs-keyword">on</span> the interface FortyGigE1/<span class="hljs-number">0</span>/<span class="hljs-number">50</span> is up.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">44</span>:<span class="hljs-number">13</span>:<span class="hljs-number">638</span> LAGG/<span class="hljs-number">6</span>/LAGG ACTIVE: Member <span class="hljs-keyword">port</span> FGE1/<span class="hljs-number">0</span>/<span class="hljs-number">50</span> of aggregation <span class="hljs-keyword">group</span> BAGG1 changed <span class="hljs-keyword">to</span> the active <span class="hljs-keyword">state</span>.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">43</span>:<span class="hljs-number">43</span>:<span class="hljs-number">505</span>  IFNET/<span class="hljs-number">3</span>/PHY UPDOWN: FortyGigE1/<span class="hljs-number">0</span>/<span class="hljs-number">50</span> link status is up.<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pf">CSW:<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">44</span>:<span class="hljs-number">13</span>:<span class="hljs-number">888</span>  IFNET/<span class="hljs-number">5</span>/LINK_UPDOWN: Line protocol <span class="hljs-keyword">state</span> <span class="hljs-keyword">on</span> the interface FortyGigE1/<span class="hljs-number">2</span>/<span class="hljs-number">0</span>/<span class="hljs-number">31</span> changed <span class="hljs-keyword">to</span> up.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">44</span>:<span class="hljs-number">13</span>:<span class="hljs-number">653</span>  LAGG/<span class="hljs-number">6</span>/LAGG ACTIVE: Member <span class="hljs-keyword">port</span> FGE1/<span class="hljs-number">2</span>/<span class="hljs-number">0</span>/<span class="hljs-number">31</span> of aggregation <span class="hljs-keyword">group</span>BAGG129 changed <span class="hljs-keyword">to</span> the actiLve <span class="hljs-keyword">state</span>.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">43</span>:<span class="hljs-number">42</span>:<span class="hljs-number">143</span>  IFNET/<span class="hljs-number">3</span>/PHY_UPDOWN: Physical <span class="hljs-keyword">state</span> <span class="hljs-keyword">on</span> the interfaceFortyGigE1/<span class="hljs-number">2</span>/<span class="hljs-number">0</span>/<span class="hljs-number">31</span> changed <span class="hljs-keyword">to</span> up. <br></code></pre></td></tr></table></figure><ul><li>扩容第二个端口F2&#x2F;0&#x2F;50时，探测部分IP有丢包，ASW侧开启端口后延迟了30s后加入聚合组，CSW侧直接加入聚合组，此时部分IP出现丢包；<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pf">ASW：<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">46</span>:<span class="hljs-number">57</span>:<span class="hljs-number">624</span>  IFNET/<span class="hljs-number">5</span>/LINK UPDOWN: Line protocol <span class="hljs-keyword">on</span> the interface fortyGig2/<span class="hljs-number">0</span>/<span class="hljs-number">50</span> is up.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">46</span>:<span class="hljs-number">57</span>:<span class="hljs-number">584</span>  LAGG/<span class="hljs-number">6</span>/LAG ACTIvE: Member <span class="hljs-keyword">port</span> FGE2/<span class="hljs-number">0</span>/<span class="hljs-number">50</span> of aggregation <span class="hljs-keyword">group</span> BAGG1 changed <span class="hljs-keyword">to</span> the active <span class="hljs-keyword">state</span>.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">46</span>:<span class="hljs-number">27</span>:<span class="hljs-number">471</span>  IFNET/<span class="hljs-number">3</span>/PHY UPDOWN: FortyGigE2/<span class="hljs-number">0</span>/<span class="hljs-number">50</span> link status is up.<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pf">CSW: <br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">46</span>:<span class="hljs-number">27</span>:<span class="hljs-number">736</span>  IFNET/<span class="hljs-number">5</span>/LINK UPDOWN: Line protocol <span class="hljs-keyword">on</span> the interface fortyGig2/<span class="hljs-number">2</span>/<span class="hljs-number">0</span>/<span class="hljs-number">31</span> changed <span class="hljs-keyword">to</span> up.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">46</span>:<span class="hljs-number">27</span>:<span class="hljs-number">609</span>  LAGG/<span class="hljs-number">6</span>/LAGG ACTIVE:Member <span class="hljs-keyword">port</span> FGE2/<span class="hljs-number">2</span>/<span class="hljs-number">0</span>/<span class="hljs-number">31</span> of aggregation <span class="hljs-keyword">group</span> BAGG129 changed <span class="hljs-keyword">to</span> the active <span class="hljs-keyword">state</span>.<br><br>%Jul <span class="hljs-number">18</span> <span class="hljs-number">16</span>:<span class="hljs-number">46</span>:<span class="hljs-number">26</span>:<span class="hljs-number">327</span>  IFNET/<span class="hljs-number">3</span>/PHY_UPDOWN: Physical <span class="hljs-keyword">state</span> <span class="hljs-keyword">on</span> the interface FortyGigE2/<span class="hljs-number">2</span>/<span class="hljs-number">0</span>/<span class="hljs-number">31</span> changed <span class="hljs-keyword">to</span> up.<br></code></pre></td></tr></table></figure><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><ul><li>经排查，网工操作步骤正常，初步怀疑H3C交换机侧lacp协商问题</li><li>成员端口起来后加入聚合组时，lacp交互立即发包、且需要交互完整的协商过程。由于设备当前版本存在lacp模块处理报文限速保护（200ms3个报文），正常情况下两端设备都不存在限速保护则几秒即可协商成功</li><li>在扩容第一个接口时，由于触发了6300的限速保护机制，使6300丢弃协商报文，lacp中间协商过程没有完成，导致两端接口需等待一个长超时时间30s后继续协商（设备默认是长超时，30秒发一次lacp报文），所以第一次扩容接口有30秒延迟时间</li><li>第二次扩容接口时，同样也触发了6300的限速保护机制，但丢弃了最后一个协商报文，则125侧认为协商已经完成，但6300侧没有完成整个协商过程，导致125侧接口up，6300侧接口down，从而导致丢包。等待一个长超时时间30s后继续协商，所以30秒后6300侧接口up</li></ul><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><ul><li>可以通过修改成员接口为lacp短超时规避，1秒发送一次lacp报文；设备缺省为lacp长超时模式.<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">interface</span>  <span class="hljs-symbol">X</span><br> <span class="hljs-symbol">lacp</span> <span class="hljs-symbol">period</span> <span class="hljs-symbol">short</span><br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>网络运维</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network</tag>
      
      <tag>案例</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GRE</title>
    <link href="/2024/02/11/GRE/"/>
    <url>/2024/02/11/GRE/</url>
    
    <content type="html"><![CDATA[<h3 id="什么是GRE"><a href="#什么是GRE" class="headerlink" title="什么是GRE?"></a>什么是GRE?</h3><ul><li>通用路由封装（GRE：Genetic Routing Encapsulation）是一种隧道技术，也是实现VPN的一种方式，它规定了如何将一种网络协议下的数据报文封装在另外一种网络协议中，使这些被封装的数据包能够在另一个网络层协议中传输</li><li>GRE提供了将一种协议的报文封装在另一种协议报文中的机制，使报文能够在异种网络中传输，而异种报文传输的通道称为Tunnel，是VPN的第三层隧道协议</li></ul><h3 id="为什么需要GRE封装？"><a href="#为什么需要GRE封装？" class="headerlink" title="为什么需要GRE封装？"></a>为什么需要GRE封装？</h3><ul><li>骨干网中一般采用单一网络协议（例如IPv4）进行数据报文传输，但是不同的非骨干网上可能会使用不同网络协议（例如：IPv6等）进行数据报文传输。由于骨干网与非骨干网使用的协议不同，这样将导致非骨干网之间无法通过骨干网传输数据报文。GRE协议通过实现一种协议封装另一种协议来解决这个问题</li></ul><h3 id="GRE是如何工作的"><a href="#GRE是如何工作的" class="headerlink" title="GRE是如何工作的"></a>GRE是如何工作的</h3><ul><li><p>加封装过程</p><ul><li>系统收到需要进行封装和路由的某网络层协议数据时，将首先对其加上GRE报文头，使之成为GRE报文，再将其封装在另一协议（如IP）中。这样，此报文的转发就可以完全由IP协议负责</li></ul></li><li><p>GRE封装后的报文格式</p><img src="/2024/02/11/GRE/GRE.gif" class="" title="GRE"></li><li><p>解封装过程</p><ul><li>剥掉报文的IP报头，交给GRE协议处理（进行检验密钥、检查校验和及报文的序列号等）</li><li>GRE协议完成相应的处理后，剥掉GRE报头，再交由底层协议对此数据报进行后续的转发处理</li></ul></li></ul><h3 id="GRE隧道的应用"><a href="#GRE隧道的应用" class="headerlink" title="GRE隧道的应用"></a>GRE隧道的应用</h3><ul><li>将不连续的子网连接起来，实现跨越广域网的VPN</li><li>扩大了布跳数受限协议（如RIP）的网络工作范围</li><li>IDC边缘节点通过公网IP建立GRE隧道进行管理</li></ul>]]></content>
    
    
    <categories>
      
      <category>网络技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>静态路由联动bfd-echo解决路由ecmp问题</title>
    <link href="/2024/02/11/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E8%81%94%E5%8A%A8bfd-echo%E8%A7%A3%E5%86%B3%E8%B7%AF%E7%94%B1ecmp%E9%97%AE%E9%A2%98/"/>
    <url>/2024/02/11/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E8%81%94%E5%8A%A8bfd-echo%E8%A7%A3%E5%86%B3%E8%B7%AF%E7%94%B1ecmp%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><ul><li>DSW上联CSW，现有架构口子型上联，因业务流量增长，需进行上联扩容</li><li>网络拓扑<img src="/2024/02/11/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E8%81%94%E5%8A%A8bfd-echo%E8%A7%A3%E5%86%B3%E8%B7%AF%E7%94%B1ecmp%E9%97%AE%E9%A2%98/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E8%81%94%E5%8A%A8bfd.png" class="" title="拓扑"></li><li>路由介绍<ul><li>ASW–DSW通过EBGP三层对接，DSW学习到的EBGP路由做PBR&#x2F;路由策略重定向下一跳地址到CSW</li><li>DSW–CSW静态路由三层对接</li></ul></li></ul><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul><li>新增扩容线路后，路由不会ECMP，做PBR&#x2F;路由策略重定向下一跳地址到CSW这部分路由只会跑原有线路</li></ul><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><ul><li>PBR&#x2F;路由策略不能直接定向2个下一跳地址</li></ul><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><ul><li>可通过配置静态路由联动bfd echo解决<ul><li>新增扩容线路三层、bfd对接</li><li>新增一个重定向地址，写2条目的地址指向重定向IP的静态路由联动bfd echo</li></ul></li><li>具体命令实施<ul><li>bfd echo 配置 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">bfd <span class="hljs-number">1</span> bind peer-ip X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span> interface X source-ip X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span> one-arm-echo<br>discriminator local <span class="hljs-number">1</span><br>bfd <span class="hljs-number">2</span> bind peer-ip X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span> interface X source-ip X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span> one-arm-echo<br>discriminator local <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure></li><li>静态路由配置 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ip route-static X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span>.X（重定向IP） <span class="hljs-number">255.255</span>.<span class="hljs-number">255.255</span> 下一跳端口 X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span>  track bfd-session <span class="hljs-number">1</span>  description To_CSW_1<br>ip route-static X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span>.X（重定向IP） <span class="hljs-number">255.255</span>.<span class="hljs-number">255.255</span> 下一跳端口 X<span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span><span class="hljs-selector-class">.X</span>  track bfd-session <span class="hljs-number">2</span>  description To_CSW_2<br></code></pre></td></tr></table></figure></li><li>PBR&#x2F;路由策略重定向下一跳地址 <figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tp">route-policy <span class="hljs-keyword">X</span> permit node <span class="hljs-number">500</span><br>  apply ip-address next-hop <span class="hljs-keyword">X</span>.<span class="hljs-keyword">X</span>.<span class="hljs-keyword">X</span>.<span class="hljs-keyword">X</span>（重定向IP）<br><br>traffic behavior <span class="hljs-keyword">X</span><br>  redirect nexthop <span class="hljs-keyword">X</span>.<span class="hljs-keyword">X</span>.<span class="hljs-keyword">X</span>.<span class="hljs-keyword">X</span>（重定向IP）<br></code></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>网络运维</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network</tag>
      
      <tag>案例</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>常用诊断命令汇总</title>
    <link href="/2024/02/09/%E5%B8%B8%E7%94%A8%E8%AF%8A%E6%96%AD%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/"/>
    <url>/2024/02/09/%E5%B8%B8%E7%94%A8%E8%AF%8A%E6%96%AD%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="华三交换机常用命令汇总"><a href="#华三交换机常用命令汇总" class="headerlink" title="华三交换机常用命令汇总"></a>华三交换机常用命令汇总</h2><h3 id="设备类型"><a href="#设备类型" class="headerlink" title="设备类型"></a>设备类型</h3><ul><li>dis device manuinfo  &#x2F;&#x2F;查看设备型号、SN</li><li>dis version  &#x2F;&#x2F;查看设备版本补丁、重启时间</li></ul><h3 id="端口类型"><a href="#端口类型" class="headerlink" title="端口类型"></a>端口类型</h3><ul><li>dis int brief  &#x2F;&#x2F;查看设备端口状态</li><li>dis int brief description  &#x2F;&#x2F; 查看设备端口描述信息</li><li>dis transceiver int Ten-GigabitEthernetX&#x2F;X&#x2F;X  &#x2F;&#x2F;查看设备端口光模块信息</li><li>dis transceiver diagnosis int Ten-GigabitEthernetX&#x2F;X&#x2F;X  &#x2F;&#x2F;查看设备端口光功率详细信息</li></ul><h3 id="日志类型"><a href="#日志类型" class="headerlink" title="日志类型"></a>日志类型</h3><ul><li>dis logbuffer reverse  &#x2F;&#x2F;查看设备近期log信息</li><li>dis logbuffer size XX  &#x2F;&#x2F;查看设备近XX条log信息</li></ul><h3 id="lacp常用诊断命令"><a href="#lacp常用诊断命令" class="headerlink" title="lacp常用诊断命令"></a>lacp常用诊断命令</h3><ul><li>dis link-aggregation verbose Bridge-Aggregation X  &#x2F;&#x2F;查看X聚合组聚合情况、system id、优先级等详细信息</li><li>dis link-aggregation member-port Ten-GigabitEthernet X  &#x2F;&#x2F;查看X端口的lacp报文收发情况</li></ul><h3 id="irf相关查询命令"><a href="#irf相关查询命令" class="headerlink" title="irf相关查询命令"></a>irf相关查询命令</h3><ul><li>dis irf  &#x2F;&#x2F;查看irf堆叠信息</li><li>dis irf configuration  &#x2F;&#x2F;查看irf堆叠端口配置信息</li></ul><h3 id="drni相关查询命令"><a href="#drni相关查询命令" class="headerlink" title="drni相关查询命令"></a>drni相关查询命令</h3><ul><li>dis drni keepalive  &#x2F;&#x2F;查看keepalive详细信息</li><li>dis drni role  &#x2F;&#x2F;查看drni主备信息</li><li>dis drni summary  &#x2F;&#x2F;查看设备drni汇总信息</li></ul><h3 id="路由相关命令"><a href="#路由相关命令" class="headerlink" title="路由相关命令"></a>路由相关命令</h3><ul><li>dis ip routing-table  &#x2F;&#x2F;查看IP路由表</li><li>dis ip routing-table vpn-instance X  &#x2F;&#x2F;查看对应X vrf的路由表</li><li>dis ip routing-table summary  &#x2F;&#x2F;查看路由汇总信息</li><li>dis ip routing-table protocol X  &#x2F;&#x2F;查看对应详细路由协议的路由表信息</li><li>dis bgp routing-table ipv4 unicast  &#x2F;&#x2F;查看bgp路由表信息</li><li>dis bgp routing-table ipv4 unicast peer X.X.X.X received-routes  &#x2F;&#x2F;查看从BGP邻居接受到的bgp路由信息</li></ul><h2 id="华为交换机常用命令汇总"><a href="#华为交换机常用命令汇总" class="headerlink" title="华为交换机常用命令汇总"></a>华为交换机常用命令汇总</h2><h3 id="设备类型-1"><a href="#设备类型-1" class="headerlink" title="设备类型"></a>设备类型</h3><ul><li>dis device manufacture-info  &#x2F;&#x2F;查看设备型号、SN</li><li>dis version  &#x2F;&#x2F;查看设备版本补丁、重启时间</li></ul><h3 id="端口类型-1"><a href="#端口类型-1" class="headerlink" title="端口类型"></a>端口类型</h3><ul><li>dis int brief  &#x2F;&#x2F;查看设备端口状态</li><li>dis int description  &#x2F;&#x2F; 查看设备端口描述信息</li><li>dis int 10GE 1&#x2F;0&#x2F;1 transceiver  &#x2F;&#x2F;查看设备端口光模块信息</li><li>dis int 10GE 1&#x2F;0&#x2F;1 transceiver verbose  &#x2F;&#x2F;查看设备端口光功率详细信息</li></ul><h3 id="日志类型-1"><a href="#日志类型-1" class="headerlink" title="日志类型"></a>日志类型</h3><ul><li>dis logbuffer   &#x2F;&#x2F;查看设备近期log信息</li><li>dis logbuffer size XX  &#x2F;&#x2F;查看设备近XX条log信息</li></ul><h3 id="lacp常用诊断命令-1"><a href="#lacp常用诊断命令-1" class="headerlink" title="lacp常用诊断命令"></a>lacp常用诊断命令</h3><ul><li>display  interface  Eth X  &#x2F;&#x2F;查看X聚合组聚合情况、system id、优先级等详细信息</li><li>dis lacp statistics eth-trunk  &#x2F;&#x2F;查看端口的lacp报文收发情况</li></ul><h3 id="stack相关查询命令"><a href="#stack相关查询命令" class="headerlink" title="stack相关查询命令"></a>stack相关查询命令</h3><ul><li>dis stack  &#x2F;&#x2F;查看irf堆叠信息</li><li>dis stack  configuration  &#x2F;&#x2F;查看irf堆叠端口配置信息</li></ul><h3 id="m-lag相关查询命令"><a href="#m-lag相关查询命令" class="headerlink" title="m-lag相关查询命令"></a>m-lag相关查询命令</h3><ul><li>dis dfs-group 1 m-lag  &#x2F;&#x2F;查看m-lag详细信息</li><li>dis dfs-group m-lag brief  &#x2F;&#x2F;查看设备m-lag端口信息</li></ul><h3 id="路由相关命令-1"><a href="#路由相关命令-1" class="headerlink" title="路由相关命令"></a>路由相关命令</h3><ul><li>dis ip routing-table  &#x2F;&#x2F;查看IP路由表</li><li>dis ip routing-table vpn-instance X  &#x2F;&#x2F;查看对应X vrf的路由表</li><li>dis ip routing-table statistics  &#x2F;&#x2F;查看路由汇总信息</li><li>dis ip routing-table protocol X  &#x2F;&#x2F;查看对应详细路由协议的路由表信息</li><li>dis bgp routing-table   &#x2F;&#x2F;查看bgp路由表信息</li><li>dis bgp routing-table peer X.X.X.X received-routes  &#x2F;&#x2F;查看从BGP邻居接受到的bgp路由信息</li></ul><h2 id="cisco交换机常用命令汇总"><a href="#cisco交换机常用命令汇总" class="headerlink" title="cisco交换机常用命令汇总"></a>cisco交换机常用命令汇总</h2><h3 id="设备类型-2"><a href="#设备类型-2" class="headerlink" title="设备类型"></a>设备类型</h3><ul><li>show inventory  &#x2F;&#x2F;查看设备型号、SN</li><li>show version  &#x2F;&#x2F;查看设备版本补丁、重启时间</li></ul><h3 id="端口类型-2"><a href="#端口类型-2" class="headerlink" title="端口类型"></a>端口类型</h3><ul><li>show int brief  &#x2F;&#x2F;查看设备端口状态</li><li>show int description  &#x2F;&#x2F; 查看设备端口描述信息</li><li>show int ethernet 1&#x2F;1 transceiver  &#x2F;&#x2F;查看设备端口光模块信息</li><li>show int ethernet 1&#x2F;1 transceiver details  &#x2F;&#x2F;查看设备端口光功率详细信息</li></ul><h3 id="日志类型-2"><a href="#日志类型-2" class="headerlink" title="日志类型"></a>日志类型</h3><ul><li>show logging   &#x2F;&#x2F;查看设备近期log信息</li><li>show logging last XX  &#x2F;&#x2F;查看设备近XX条log信息</li></ul><h3 id="lacp常用诊断命令-2"><a href="#lacp常用诊断命令-2" class="headerlink" title="lacp常用诊断命令"></a>lacp常用诊断命令</h3><ul><li>show lacp port-channel interface port-channel 1  &#x2F;&#x2F;查看X聚合组聚合情况、system id、优先级等详细信息</li><li>show lacp counters  &#x2F;&#x2F;查看端口的lacp报文收发情况</li></ul><h3 id="vpc相关查询命令"><a href="#vpc相关查询命令" class="headerlink" title="vpc相关查询命令"></a>vpc相关查询命令</h3><ul><li>show vpc peer-keepalive  &#x2F;&#x2F;查看keepalive详细信息</li><li>show vpc role  &#x2F;&#x2F;查看drni主备信息</li><li>show vpc brief  &#x2F;&#x2F;查看设备drni汇总信息</li></ul><h3 id="路由相关命令-2"><a href="#路由相关命令-2" class="headerlink" title="路由相关命令"></a>路由相关命令</h3><ul><li>show ip route  &#x2F;&#x2F;查看IP路由表</li><li>show ip route vrf all   &#x2F;&#x2F;查看所有vrf的路由表</li><li>show ip route summary  &#x2F;&#x2F;查看路由汇总信息</li><li>show bgp ipv4 unicast   &#x2F;&#x2F;查看bgp路由表信息</li><li>show bgp ipv4 unicast neighbors X.X.X.X received-routes  &#x2F;&#x2F;查看从BGP邻居接受到的bgp路由信息</li></ul>]]></content>
    
    
    <categories>
      
      <category>网络技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
